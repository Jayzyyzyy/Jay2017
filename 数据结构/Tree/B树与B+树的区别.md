# B树与B+树的区别 #

一、区别

 ![](http://images2015.cnblogs.com/blog/576154/201609/576154-20160907130956629-1833512478.png)

如图所示，区别有以下两点：

1. B+树中只有叶子节点会带有指向记录的指针（ROWID），而B树则所有节点都带有，在内部节点出现的索引项不会再出现在叶子节点中。

2. B+树中所有叶子节点都是通过指针连接在一起，而B树不会。

 

B+树的优点：

1. 非叶子节点不会带上ROWID，这样，一个块中可以容纳更多的索引项，一是可以降低树的高度。二是一个内部节点可以定位更多的叶子节点。

2. 叶子节点之间通过指针来连接，范围扫描将十分简单，而对于B树来说，则需要在叶子节点和内部节点不停的往返移动。

 

B树的优点：

对于在内部节点的数据，可直接得到，不必根据叶子节点来定位。

---

1. B树：多路搜索树，非叶子结点存储指向关键字范围的子结点；所有关键字在整颗树中出现，且只出现一次，非叶子结点可以命中；
![](http://static.oschina.net/uploads/space/2011/0509/170904_G7rh_135650.jpg)
2. B+树：在B-树基础上，为叶子结点增加链表指针，所有关键字都在叶子结点 中出现，非叶子结点作为叶子结点的索引；B+树总是到叶子结点才命中；
![](http://static.oschina.net/uploads/space/2011/0509/171006_xw1C_135650.jpg)
3. B*树：在B+树基础上，为非叶子结点也增加链表指针，将结点的最低利用率从1/2提高到2/3；
![](http://static.oschina.net/uploads/space/2011/0509/171056_sAnR_135650.jpg)

二、应用场景

1. B树：磁盘存储，文件系统
2. B+树：　B+ 树通常用于数据库和操作系统的文件系统中。NTFS, ReiserFS, NSS, XFS, JFS, ReFS 和BFS等文件系统都在使用B+树作为元数据索引。B+ 树的特点是能够保持数据稳定有序，其插入与修改拥有较稳定的对数时间复杂度。

原因：

（1）**B+树空间利用率更高，可减少I/O次数**，
         
一般来说，索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。这样的话，索引查找过程中就要产生磁盘I/O消耗。而因为B+树的内部节点只是作为索引使用，而不像B-树那样每个节点都需要存储硬盘指针。
         
也就是说：**B+树中每个非叶节点没有指向某个关键字具体信息的指针，所以每一个节点可以存放更多的关键字数量，即一次性读入内存所需要查找的关键字也就越多，减少了I/O操作。**

e.g.假设磁盘中的一个盘块容纳16bytes，而一个关键字2bytes，一个关键字具体信息指针2bytes。一棵9阶B-tree(一个结点最多8个关键字)的内部结点需要2个盘快。而B+ 树内部结点只需要1个盘快。当需要把内部结点读入内存中的时候，B 树就比B+ 树多一次盘块查找时间(在磁盘中就   是盘片旋转的时间)。

（2）**增删文件（节点）时，效率更高**，

因为B+树的叶子节点包含所有关键字，并以有序的链表结构存储，这样可很好提高增删效率。
    
（3）**B+树的查询效率更加稳定**，
   
因为B+树的每次查询过程中，都需要遍历从根节点到叶子节点的某条路径。所有关键字的查询路径长度相同，导致每一次查询的效率相当。

3. B*树：文件系统，空间使用率更高